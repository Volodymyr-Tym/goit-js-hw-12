import{f as m,c as g}from"./assets/pixabay-api-DHOET29h.js";/* empty css                      */import{S as h,i as s}from"./assets/vendor-CRwkH7JT.js";const p=document.querySelector("form.js-form"),l=document.querySelector("ul.js-gallery"),a=document.querySelector("span.js-loader"),y=document.querySelector(".observed-el-js");let r=1,c=0,o="";const u=new h("ul.gallery a",{captionsData:"alt",captionDelay:250}),f={root:null,rootMargin:"0px 0px 200px 0px",treshhold:1},S=async t=>{if(t[0].isIntersecting){a.classList.remove("is-hidden"),console.log(t);try{r++;const{data:e}=await m(o,r),i=e.hits.map(n=>g(n)).join("");if(l.insertAdjacentHTML("beforeend",i),u.refresh(),r===c){d.disconnect(),s.info({message:"We're sorry, but you've reached the end of search results.",messageSize:"16",position:"topRight",timeout:!1}),r=1;return}}catch({response:e}){s.error({title:"Ooops",titleSize:"18",message:e.data,messageSize:"18",position:"center",timeout:!1,progressBar:!1,overlay:!0,overlayColor:"rgba(0, 0, 0, 0.5)"})}finally{a.classList.add("is-hidden")}}},d=new IntersectionObserver(S,f),b=async t=>{try{if(t.preventDefault(),l.innerHTML="",a.classList.remove("is-hidden"),o=p.search.value.trim(),r=1,o===""){s.info({message:"Searching field is empty",messageSize:"16",position:"topRight"}),a.classList.add("is-hidden"),t.target.reset();return}const{data:e}=await m(o,r);if(c=Math.ceil(e.totalHits/15),e.hits.length===0){s.error({title:"Sorry,",message:"there are no images matching your search query. Please try again!",messageSize:"16",position:"topRight"}),t.target.reset();return}const i=e.hits.map(n=>g(n)).join("");l.insertAdjacentHTML("beforeend",i),c>1?d.observe(y):d.disconnect(),u.refresh(),t.target.reset()}catch({response:e}){s.error({title:"Ooops",titleSize:"18",message:e.data,messageSize:"18",position:"center",timeout:!1,progressBar:!1,overlay:!0,overlayColor:"rgba(0, 0, 0, 0.5)"})}finally{a.classList.add("is-hidden")}};p.addEventListener("submit",b);
//# sourceMappingURL=gallery-infinite-scroll.js.map
