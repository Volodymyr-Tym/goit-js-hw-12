{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryImageTemplate = imageInfo => {\n  return `\n        <li class=\"gallery-item\">\n          <a class=\"item-link\" href=\"${imageInfo.largeImageURL}\">\n            <img class=\"item-img\"\n            src=\"${imageInfo.webformatURL}\"\n            alt=\"${imageInfo.tags}\"/>\n          </a>\n    \n          <ul class=\"item-info-list\">\n            <li class=\"item-info\">\n              Likes <span class=\"quantity\">${imageInfo.likes}</span> \n            </li>\n    \n            <li class=\"item-info\">\n              Views <span class=\"quantity\">${imageInfo.views}</span>\n            </li>\n    \n            <li class=\"item-info\">\n              Comments <span class=\"quantity\">${imageInfo.comments}</span>\n            </li>\n    \n            <li class=\"item-info\">\n              Downloads <span class=\"quantity\">${imageInfo.downloads}</span>\n            </li>\n          </ul>\n        </li>\n      `;\n};\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com';\n\nexport const fetchImages = (serchQuery, page) => {\n  const axiosOptions = {\n    params: {\n      key: '45502477-f90d28a95f79ee2acbc927104',\n      q: serchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    },\n  };\n\n  return axios.get(`/api/`, axiosOptions);\n};\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { createGalleryImageTemplate } from './js/render-functions';\nimport { fetchImages } from './js/pixabay-api';\n\nconst form = document.querySelector('form.js-form');\nconst gallery = document.querySelector('ul.js-gallery');\nconst preLoader = document.querySelector('span.js-loader');\nconst loadMoreBtn = document.querySelector('.load-more-js');\n\nlet currentPage = 1;\nlet totalPages = 0;\nlet inputValue = '';\nlet galleryImageHeight = 0;\n\nconst newGalleryBox = new SimpleLightbox('ul.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst onFormSubmit = async event => {\n  try {\n    event.preventDefault();\n    gallery.innerHTML = '';\n    loadMoreBtn.classList.add('is-hidden');\n    preLoader.classList.remove('is-hidden');\n\n    inputValue = form.search.value.trim();\n    currentPage = 1;\n\n    if (inputValue === '') {\n      iziToast.info({\n        message: 'Searching field is empty',\n        messageSize: '16',\n        position: 'topRight',\n      });\n\n      preLoader.classList.add('is-hidden');\n      event.target.reset();\n      return;\n    }\n\n    const { data } = await fetchImages(inputValue, currentPage);\n    totalPages = Math.ceil(data.totalHits / 15);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Sorry,',\n        message:\n          'there are no images matching your search query. Please try again!',\n        messageSize: '16',\n        position: 'topRight',\n      });\n\n      event.target.reset();\n      return;\n    }\n\n    const drawGallery = data.hits\n      .map(imageInfo => createGalleryImageTemplate(imageInfo))\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', drawGallery);\n\n    const galleryImage = gallery.querySelector('li');\n    galleryImageHeight = galleryImage.getBoundingClientRect().height;\n\n    console.log(totalPages);\n    if (totalPages > 1) {\n      loadMoreBtn.classList.remove('is-hidden');\n    }\n\n    newGalleryBox.refresh();\n    event.target.reset();\n  } catch ({ response: err }) {\n    iziToast.error({\n      title: 'Ooops',\n      titleSize: '18',\n      message: err.data,\n      messageSize: '18',\n      position: 'center',\n      timeout: false,\n      progressBar: false,\n      overlay: true,\n      overlayColor: 'rgba(0, 0, 0, 0.5)',\n    });\n  } finally {\n    preLoader.classList.add('is-hidden');\n  }\n};\n\nconst onLoadMoreBtnClick = async event => {\n  preLoader.classList.remove('is-hidden');\n\n  try {\n    currentPage++;\n\n    const { data } = await fetchImages(inputValue, currentPage);\n\n    const drawGallery = data.hits\n      .map(imageInfo => createGalleryImageTemplate(imageInfo))\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', drawGallery);\n    newGalleryBox.refresh();\n\n    scrollBy({ top: galleryImageHeight * 2, behavior: 'smooth' });\n\n    if (currentPage === totalPages) {\n      loadMoreBtn.classList.add('is-hidden');\n      iziToast.info({\n        message: `We're sorry, but you've reached the end of search results.`,\n        messageSize: '16',\n        position: 'topRight',\n        timeout: false,\n      });\n      return;\n    }\n  } catch ({ response: err }) {\n    iziToast.error({\n      title: 'Ooops',\n      titleSize: '18',\n      message: err.data,\n      messageSize: '18',\n      position: 'center',\n      timeout: false,\n      progressBar: false,\n      overlay: true,\n      overlayColor: 'rgba(0, 0, 0, 0.5)',\n    });\n  } finally {\n    preLoader.classList.add('is-hidden');\n  }\n};\n\nform.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n"],"names":["createGalleryImageTemplate","imageInfo","axios","fetchImages","serchQuery","page","axiosOptions","form","gallery","preLoader","loadMoreBtn","currentPage","totalPages","inputValue","galleryImageHeight","newGalleryBox","SimpleLightbox","onFormSubmit","event","iziToast","data","drawGallery","err","onLoadMoreBtnClick"],"mappings":"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"}